---
layout: post
categories: devops
title: "–ö–∞–∫ —Å–¥–∞–º–ø–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ AWS –≤ –≤–∏–¥–µ –∫–æ–¥–∞"
description: "–ù–µ–±–æ–ª—å—à–æ–π –≥–∞–π–¥ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é terraformer"
keywords: "terraform, aws"
---
## –í–≤–æ–¥–Ω–∞—è

üí° –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å AWS –ø—Ä–∏–¥—É–º–∞–Ω –∏–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∞–º–∏ –¥–ª—è –æ–ø—ã—Ç–æ–≤ –Ω–∞–¥ –ª—é–¥—å–º–∏, –ø–æ—ç—Ç–æ–º—É –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ —É –Ω–∞—Å —Ç–∞–º –µ—Å—Ç—å - –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–æ. –ì–æ—Ä–∞–∑–¥–æ –ø—Ä–æ—â–µ —Å–¥–∞–º–ø–∏—Ç—å –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –≤–∏–¥–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ —Ä–µ–≤—å—é–∏—Ç—å –µ—ë —É–∂–µ —Ç–∞–º.

–í–æ–æ–±—â–µ, –Ω–∞ —Ä—ã–Ω–∫–µ –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ –ø–æ–¥–æ–±–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç ([https://www.reddit.com/r/aws/comments/shb053/is_there_a_good_tool_to_map_out_aws/](https://www.reddit.com/r/aws/comments/shb053/is_there_a_good_tool_to_map_out_aws/) - –≤–æ—Ç —Ç—É—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ —Å–µ—Ä–≤–∏—Å–æ–≤), –Ω–æ —á–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö –ø–æ–¥–∑–∞–±—Ä–æ—à–µ–Ω—ã, —á–∞—Å—Ç—å –∏–¥—É—Ç –∑–∞ –¥–µ–Ω—å–≥–∏, –∞ —á–∞—Å—Ç—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç managed –ø–æ–¥—Ö–æ–¥, –∞ –¥–∞–≤–∞—Ç—å –∫—Ä–µ–¥—ã –æ—Ç AWS –∫–∞–∫–∏–º-—Ç–æ –¥—è–¥—è–º –Ω–µ –æ—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è.

–¢–∞–∫ —á—Ç–æ –¥–ª—è –¥–∞–º–ø–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [https://github.com/GoogleCloudPlatform/terraformer](https://github.com/GoogleCloudPlatform/terraformer) - —É—Ç–∏–ª–∏—Ç—É, —Å–¥–µ–ª–∞–Ω–Ω—É—é –∏–Ω–∂–µ–Ω–µ—Ä–∞–º–∏ –∏–∑ Google, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ–≤–æ–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –¥–æ–≤–µ—Ä–∏—è –∫ –Ω–µ–π. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ AWS —Ç–æ–∂–µ –±—ã –ø–æ–¥–æ—à–ª–∏, –¥—É–º–∞—é, –Ω–æ —É –Ω–∞—Å –∏–Ω—Ñ—Ä–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ AWS, —Ç–∞–∫ —á—Ç–æ —Ö–æ—á–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏.

–í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω–æ, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Terraform 0.13, –Ω–æ —É –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ –∑–∞–≤–µ–ª–æ—Å—å –∏ –Ω–∞ —Å–≤–µ–∂–∏—Ö –≤–µ—Ä—Å–∏—è—Ö Terraform (1.2.x –∏ 1.3.x –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏).

## –ê–ª–≥–æ—Ä–∏—Ç–º

- –°—Ç–∞–≤–∏–º Terraform (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é —ç—Ç–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ [https://github.com/tfutils/tfenv](https://github.com/tfutils/tfenv), —á—Ç–æ–±—ã –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏)
- –°—Ç–∞–≤–∏–º Terraformer
- –°–µ—Ç–∞–ø–∏–º –¥–æ—Å—Ç—É–ø –¥–æ AWS (–ø—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω —Å–µ—Ç–∞–ø—É CLI-—É—Ç–∏–ª–∏—Ç—ã aws, Terraform –≤–æ–∑—å–º–µ—Ç –∫—Ä–µ–¥—ã –∏–∑ `~/.aws/credentials`)
- –°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –∫–∞—á–∞–µ–º AWS provider –¥–ª—è Terraform

```bash
mkdir terraformer
cd terraformer
echo 'provider "aws" {}' > main.tf
terraform init
```

- –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ–∞–π–ª—ã (`.terraform` –∏ `.terraform.lock.hcl`)
- –ó–∞–ø—É—Å–∫–∞–µ–º `terraformer` –æ–±–Ω—é—Ö–∏–≤–∞—Ç—å –Ω–∞—à—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

```bash
terraformer import aws --resources=* --regions=us-east-1  -o aws -p  {output}/
```

- –ö–æ—Ä–æ—Ç–∫–æ –ø–æ –æ–ø—Ü–∏—è–º (–µ—Å–ª–∏ —á—Ç–æ –≤—Å—ë –µ—Å—Ç—å –≤ –¥–æ–∫–µ - [](https://github.com/GoogleCloudPlatform/terraformer#readme)[https://github.com/GoogleCloudPlatform/terraformer#readme](https://github.com/GoogleCloudPlatform/terraformer#readme))
  - `import aws` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –≤ –∫–æ–¥ –∏–Ω—Ñ—Ä—É –∏–∑ AWS. –ü–æ–º–∏–º–æ –ê–º–∞–∑–æ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Å—è—Ç–∫–æ–≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ CloudFlare
  - `--resources=*` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã. –ú–æ–∂–Ω–æ —Å–¥–∞–º–ø–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–æ–≤, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∞—É–¥–∏—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞–∫–∏–µ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à—Ç—É–∫–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä
  - `--regions=us-east-2` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —Å —ç—Ç–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞. –ü–æ –¥–µ—Ñ–æ–ª—Ç—É —Å–¥–∞–º–ø–∏—Ç —Å–æ –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (IAM, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä) —Å–¥–∞–º–ø—è—Ç—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
  - `-o aws` - –≤ –∫–∞–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–∞–º–ø–∏—Ç—å
  - `-p {output}/` - –∫–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–≤–∞—Ç—å. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω `{output}/{provider}/{service}/` (—Ç.–µ. –∫–æ–¥ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ä–∞–∑–Ω—ã–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–µ—Ä–≤–∏—Å–∞), —á—Ç–æ –≤ –º–æ–µ–º —Å–ª—É—á–∞–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ
- –ù—É –∏ –≤—Å—ë, —á–µ—Ä–µ–∑ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –æ–Ω –≤—ã–≤–∞–ª–∏–≤–∞–µ—Ç –≤—Å—ë –æ–ø–∏—Å–∞–Ω–∏–µ –∫—É–¥–∞ –µ–º—É —Å–∫–∞–∑–∞–ª–∏ –∏ –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–≤—å—é–∏—Ç—å. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–ª—ë–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∫–æ–¥ Terraform (—Ñ–∞–π–ª—ã `.tf`), —Ç–∞–∫ –∏ —Å—Ç–µ–π—Ç (—Ñ–∞–π–ª—ã `.tfstate`), —á—Ç–æ —É–¥–æ–±–Ω–æ.

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π AWS –≤—Å—ë —Ö–æ—Ä–æ—à–æ, –Ω–æ —É CloudFlare –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è Cloudflare Pages –Ω–∞–ø—Ä–∏–º–µ—Ä
- –í—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–≤–∞–ª–∏–≤–∞–µ—Ç –∫–∞–∫–∏–µ-—Ç–æ –æ—à–∏–±–∫–∏, –Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —ç—Ç–æ –Ω–µ –æ—á–µ–Ω—å —Å–∫–∞–∑–∞–ª–æ—Å—å, –Ω–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∫–æ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Terraform –Ω–∞–¥–æ –±—É–¥–µ—Ç –¥–æ–ø–∏–ª–∏–≤–∞—Ç—å —Ä—É–∫–∞–º–∏
